â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    SPENDIFY SYNC DATA FLOW (NO MERGE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ Tá»”NG QUAN:
- KhÃ´ng há»— trá»£ merge phá»©c táº¡p
- Sync theo hÆ°á»›ng Ä‘Æ¡n giáº£n: chá»n Local hoáº·c Cloud
- Cloud vÃ  Local luÃ´n giá»¯ 1 nguá»“n lÃ m â€œsá»± tháº­t cuá»‘i cÃ¹ngâ€
- Váº«n Ä‘áº£m báº£o an toÃ n, khÃ´ng máº¥t dá»¯ liá»‡u ngoÃ i Ã½ muá»‘n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£  Láº¦N SYNC Äáº¦U TIÃŠN (First Sync)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ Äiá»u kiá»‡n khá»Ÿi táº¡o:
â”‚  â€¢ appConfig.data.fileId === null
â”‚  â€¢ appConfig.data.lastSync === null
â”‚  â€¢ User click "Sync Now"
â”‚
â””â”€ Flow logic:

  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘                   CHECK LOCAL DATA                         â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
         â”œâ”€ Local empty (0 expenses, 0 notes)
         â”‚  â”‚
         â”‚  â””â”€â†’ CREATE_NEW_BACKUP
         â”‚      â””â”€ Táº¡o backup trá»‘ng
         â”‚      â””â”€ Upload lÃªn Google Drive
         â”‚      â””â”€ LÆ°u fileId vÃ o appConfig
         â”‚      â””â”€ Update lastSync
         â”‚      â””â”€ Status: âœ… "Táº¡o backup trá»‘ng thÃ nh cÃ´ng"
         â”‚
         â””â”€ Local has data (cÃ³ dá»¯ liá»‡u)
            â”‚
            â”œâ”€â†’ CHECK_CLOUD_BACKUP
            â”‚   â””â”€ Kiá»ƒm tra cÃ³ file backup trÃªn GG Drive khÃ´ng
            â”‚
            â”œâ”€ Cloud backup not found
            â”‚  â”‚
            â”‚  â””â”€â†’ CREATE_BACKUP_FROM_LOCAL
            â”‚      â””â”€ Backup toÃ n bá»™ local data
            â”‚      â””â”€ Upload lÃªn Google Drive
            â”‚      â””â”€ LÆ°u fileId
            â”‚      â””â”€ Status: âœ… "Backup dá»¯ liá»‡u local thÃ nh cÃ´ng"
            â”‚
            â””â”€ Cloud backup found
               â”‚
               â””â”€â†’ SHOW_SELECTION_DIALOG
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  "PhÃ¡t hiá»‡n dá»¯ liá»‡u trÃªn cáº£ local vÃ  cloud" â”‚
                   â”‚                                              â”‚
                   â”‚  Chá»n má»™t trong cÃ¡c tÃ¹y chá»n:                â”‚
                   â”‚  [Use Cloud Data] [Use Local Data]           â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”œâ”€ User chá»n "Use Cloud Data"
                   â”‚  â””â”€ Download cloud backup
                   â”‚  â””â”€ Replace toÃ n bá»™ local data
                   â”‚  â””â”€ Status: âœ… "DÃ¹ng dá»¯ liá»‡u tá»« cloud"
                   â”‚
                   â””â”€ User chá»n "Use Local Data"
                      â””â”€ Upload local data lÃªn cloud (overwrite)
                      â””â”€ Status: âœ… "DÃ¹ng dá»¯ liá»‡u local"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2ï¸âƒ£  Láº¦N SYNC TIáº¾P THEO (Subsequent Syncs)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ Äiá»u kiá»‡n:
â”‚  â€¢ appConfig.data.fileId !== null
â”‚  â€¢ appConfig.data.lastSync !== null
â”‚  â€¢ User click "Sync Now" hoáº·c auto-sync
â”‚
â””â”€ Flow logic:

  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘        COMPARE LOCAL vs CLOUD SYNC TIMESTAMPS               â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
         â”œâ”€â†’ GET_LOCAL_LAST_MODIFIED
         â”‚   â””â”€ Láº¥y thá»i gian sá»­a Ä‘á»•i gáº§n nháº¥t cá»§a local data
         â”‚
         â”œâ”€â†’ GET_CLOUD_METADATA
         â”‚   â””â”€ Download metadata cá»§a cloud backup (khÃ´ng táº£i file)
         â”‚   â””â”€ Láº¥y thá»i gian sá»­a Ä‘á»•i cloud
         â”‚
         â””â”€ So sÃ¡nh káº¿t quáº£:
            â”‚
            â”œâ”€ Local lastModified === Cloud lastModified (cÃ¹ng thá»i gian)
            â”‚  â””â”€ Status: âœ… "KhÃ´ng cÃ³ thay Ä‘á»•i"
            â”‚  â””â”€ Update appConfig.data.lastSync = now()
            â”‚
            â”œâ”€ Cloud má»›i hÆ¡n (cloudLastModified > localLastModified)
            â”‚  â”‚
            â”‚  â””â”€â†’ DOWNLOAD_CLOUD_DATA
            â”‚      â””â”€ Fetch cloud backup
            â”‚      â””â”€ Replace toÃ n bá»™ local data
            â”‚      â””â”€ Cáº­p nháº­t localLastModified = cloudLastModified
            â”‚      â””â”€ Update appConfig.data.lastSync = now()
            â”‚      â””â”€ Status: âœ… "Cáº­p nháº­t dá»¯ liá»‡u tá»« cloud"
            â”‚
            â””â”€ Local má»›i hÆ¡n (localLastModified > cloudLastModified)
               â”‚
               â””â”€â†’ UPLOAD_LOCAL_DATA
                   â””â”€ Backup local data
                   â””â”€ Upload lÃªn cloud (overwrite)
                   â””â”€ Cloud lastModified = localLastModified
                   â””â”€ Update appConfig.data.lastSync = now()
                   â””â”€ Status: âœ… "Äáº©y dá»¯ liá»‡u local lÃªn cloud"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3ï¸âƒ£  Káº¾T LUáº¬N  
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ KhÃ´ng cÃ²n merge logic â†’ loáº¡i bá» complexity
â€¢ Sync luÃ´n theo hÆ°á»›ng 1 chiá»u khi cÃ³ chÃªnh lá»‡ch
â€¢ Láº§n Ä‘áº§u sync cÃ³ dialog cho user chá»n local hoáº·c cloud
â€¢ So sÃ¡nh thá»i gian sá»­a Ä‘á»•i â†’ Ä‘Æ¡n giáº£n, hiá»‡u quáº£, khÃ´ng cáº§n tÃ­nh hash
â€¢ Workflow Ä‘Æ¡n giáº£n, dá»… code, dá»… maintain
â€¢ Váº«n Ä‘áº£m báº£o khÃ´ng máº¥t dá»¯ liá»‡u nháº§m láº«n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
